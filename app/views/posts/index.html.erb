<div class="container">
	<div class="row">
    	<div class="col-lg-12">
			<table class="table table-striped">

                <h2>ホーム</h2>
            		<thead>
		          		<tr>
		          			<th></th>
		          			<th></th>
		          			<th></th>
		          			<th></th>
						    <th></th>
				  		</tr>
					</thead>

					<tbody>
							<% @posts.each do |post| %>
						<tr>

							<td><%= attachment_image_tag post.user, :avatar, :fill, 20, 20, format: 'jpeg', class: "img-circle pull-left profile-img", fallback: "no-image.jpg" %></td>
							<td><%= post.user.name %></td>
							<td ><% post.images.each do |i| %> <img src=<%= "#{i}" %>><% end %></td>
							<td><%= post.content %></td>
							<td><%= link_to "詳細", post_path(post.id),class:"show_#{post.id}" %></td>
							<td><div id="like_<%=post.id %>">
							<%= render "likes/like", post: post %>
							</div></td>
						<tr>
							<% end %>
						</tr>x
					</tbody>
	  		</table>
		</div>
	</div>
</div>
<script>
function Filepreview(evt){
var files = evt.target.files;

document.getElementById('preview').innerHTML =""

for(var i = 0; i < 3;i++){
var reader = new FileReader();
var f = files[i]
reader.onload = (function(){
return function(e) {
var span = document.createElement('span');
span.innerHTML= "<img src='" +e.target.result + "'>";
document.getElementById('preview').insertBefore(span,null);
};
})(f);
reader.readAsDataURL(f);
}
}
document.getElementById('post_image').addEventListener('change',Filepreview,false);
</script>




